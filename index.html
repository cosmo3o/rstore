<!DOCTYPE html>
<html lang="ko">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>gallery</title>
	<!-- css -->
	<link rel="stylesheet" href="./css/designpages.css">
</head>

<body>
	<div id="loading">
		<div class="loadingimg">
			<img src="./images/loding.gif" alt="">
		</div>
	</div>
	<div class="design-gallery">
		<p class="use">마우스를 오버하면 이미지가 확대됩니다.<br>
		또는 휠로 페이지를 넘길 수 있습니다.</p>
		<!-- <nav>
			<ul class="gallery-menu">
			</ul>
		</nav> -->

		<ul class="boxs">
			<li>
				<a href="#none">
					<div class="box nowon1">
						<img src="./images/nowon.png" alt="nowon">
					</div>
				</a>
			</li>
			<li>
				<a href="#none">
					<div class="box nowon2">
						<img src="./images/nowon2.png" alt="nowon">
					</div>
				</a>
			</li>
			<li>
				<a href="#none">
					<div class="box mbox1">
						<img src="./images/mbox_logo style bord-01.png" alt="meat-box-img">
						<img src="./images/mbox_logo style bord-02.png" alt="meat-box-img">
						<img src="./images/mbox_logo style bord-03.png" alt="meat-box-img">
						<img src="./images/mbox_logo style bord-04.png" alt="meat-box-img">
						<img src="./images/mbox_logo style bord-05.png" alt="meat-box-img">
						<img src="./images/mbox_logo style bord-06.png" alt="meat-box-img">
						<img src="./images/mbox_logo style bord-07.png" alt="meat-box-img">
					</div>
				</a>
			</li>
			<li>
				<a href="#none">
					<div class="box mbox2">
						<img src="./images/mbox_main_slide.jpg" alt="meat-box-img">
					</div>
				</a>
			</li>
			<li>
				<a href="#none">
					<div class="box mbox3">
						<img src="./images/mbox_sub_slide.jpg" alt="meat-box-img">
					</div>
				</a>
			</li>
			<li>
				<a href="#none">
					<div class="box mbox4">
						<img src="./images/mbox_sub_slide2.jpg" alt="meat-box-img">
					</div>
				</a>
			</li>
			<li>
				<a href="#none">
					<div class="box mbox5">
						<img src="./images/sub_main_img.jpg" alt="meat-box-img">
					</div>
				</a>
			</li>
			<li>
				<a href="#none">
					<div class="box mbox6">
						<img src="./images/meatbox_coupon.png" alt="meat-box-img">
					</div>
				</a>
			</li>
			<!-- meat-box(6)-end -->
			<li>
				<a href="#none">
					<div class="box">
						<img src="./images/risotto.png" alt="first">
					</div>
				</a>
			</li>
			<li>
				<a href="#none">
					<div class="box">
						<img src="./images/pizza.jpg" alt="first">
					</div>
				</a>
			</li>
			<li>
				<a href="#none">
					<div class="box basic1">
						<img src="images/Lunar.jpg" alt="basic">
					</div>
				</a>
			</li>
			<li>
				<a href="#none">
					<div class="box basic2">
						<img src="./images/poster3.jpg.png" alt="basic">
					</div>
				</a>
			</li>
			<li>
				<a href="#none">
					<div class="box basic3">
						<img src="./images/poster2.jpg.png" alt="basic">
					</div>
				</a>
			</li>
			<li>
				<a href="#none">
					<div class="box basic4">
						<img src="./images/poster1.jpg" alt="basic">
					</div>
				</a>
			</li>
			<li>
				<a href="#none">
					<div class="box basic5">
						<img src="./images/Jordanshoes_illustration.png" alt="basic">
					</div>
				</a>
			</li>
			<li>
				<a href="#none">
					<div class="box basic6">
						<img src="./images/wall_e.jpg" alt="basic">
					</div>
				</a>
			</li>
			<li>
				<a href="#none">
					<div class="box basic7">
						<img src="./images/glass.png" alt="basic">
					</div>
				</a>
			</li>
			<li>
				<a href="#none">
					<div class="box basic8">
						<img src="./images/Album-Cover1.jpg" alt="">
					</div>
				</a>
			</li>
			<li>
				<a href="#none">
					<div class="box">
						<img src="./images/abalone.png" alt="">
					</div>
				</a>
			</li>
			<li>
				<a href="#none">
					<div class="box duolac1">
						<img src="./images/main_slide.png" alt="duolac">
					</div>
				</a>
			</li>
			<li>
				<a href="#none">
					<div class="box duolac2">
						<img src="./images/main_slide2.png" alt="duolac">
					</div>
				</a>
			</li>
			<li>
				<a href="#none">
					<div class="box duolac3">
						<img src="./images/main_slide3.png" alt="duolac">
					</div>
				</a>
			</li>
			<li>
				<a href="#none">
					<div class="box duolac4">
						<img src="./images/duolac-icon2.png" alt="duolac">
					</div>
				</a>
			</li>
			<li>
				<a href="#none">
					<div class="box mb1">
						<img src="./images/after.jpg" alt="midnight-bubble">
					</div>
				</a>
			</li>
			<li>
				<a href="#none">
					<div class="box mb2">
						<img src="./images/night.png" alt="midnight-bubble">
					</div>
				</a>
			</li>
			<li>
				<a href="#none">
					<div class="box mb3">
						<img src="./images/mb-sec2.png" alt="midnight-bubble">
					</div>
				</a>
			</li>
			<li>
				<a href="#none">
					<div class="box mb4">
						<img src="./images/event.png" alt="midnight-bubble">
					</div>
				</a>
			</li>
			<li>
				<a href="#none">
					<div class="box mb5">
						<img src="./images/section2.jpg" alt="midnight-bubble">
					</div>
				</a>
			</li>
		</ul>
		<div class="actions">
			<button class="prev">
				<img src="./images/left-icon.png" alt="">
			</button>
			<button class="next">
				<img src="./images/right-icon.png" alt="">
			</button>
		</div>
	</div>
	<script src="./script/jquery-3.1.1.min.js"></script>
	<script src="https://unpkg.com/gsap@3/dist/ScrollTrigger.min.js"></script>
	<script src="https://unpkg.co/gsap@3/dist/gsap.min.js"></script>
	<script>
			
$(window).ready(function(){
		$('#loading').delay('3000').fadeOut();
		gsap.registerPlugin(ScrollTrigger);

		let iteration = 0;
		const spacing = 0.1,
			snap = gsap.utils.snap(spacing), // we'll use this to snap the playhead on the seamlessLoop
			boxs = gsap.utils.toArray('.boxs li'),
			seamlessLoop = buildSeamlessLoop(boxs, spacing),
			scrub = gsap.to(seamlessLoop, { // we reuse this tween to smoothly scrub the playhead on the seamlessLoop
				totalTime: 0,
				duration: 0.5,
				ease: "power3",
				paused: true
			}),
			trigger = ScrollTrigger.create({
				start: 0,
				onUpdate(self) {
					if (self.progress === 1 && self.direction > 0 && !self.wrapping) {
						wrapForward(self);
					} else if (self.progress < 1e-5 && self.direction < 0 && !self.wrapping) {
						wrapBackward(self);
					} else {
						scrub.vars.totalTime = snap((iteration + self.progress) * seamlessLoop.duration());
						scrub.invalidate()
							.restart(); // to improve performance, we just invalidate and restart the same tween. No need for overwrites or creating a new tween on each update.
						self.wrapping = false;
					}
				},
				end: "+=3000",
				pin: ".design-gallery"
			});

		function wrapForward(trigger) { // when the ScrollTrigger reaches the end, loop back to the beginning seamlessly
			iteration++;
			trigger.wrapping = true;
			trigger.scroll(trigger.start + 1);
		}

		function wrapBackward(
			trigger) { // when the ScrollTrigger reaches the start again (in reverse), loop back to the end seamlessly
			iteration--;
			if (iteration < 0) { // to keep the playhead from stopping at the beginning, we jump ahead 10 iterations
				iteration = 9;
				seamlessLoop.totalTime(seamlessLoop.totalTime() + seamlessLoop.duration() * 10);
				scrub
					.pause(); // otherwise it may update the totalTime right before the trigger updates, making the starting value different than what we just set above. 
			}
			trigger.wrapping = true;
			trigger.scroll(trigger.end - 1);
		}

		function scrubTo(
			totalTime
		) { // moves the scroll position to the place that corresponds to the totalTime value of the seamlessLoop, and wraps if necessary.
			let progress = (totalTime - seamlessLoop.duration() * iteration) / seamlessLoop.duration();
			if (progress > 1) {
				wrapForward(trigger);
			} else if (progress < 0) {
				wrapBackward(trigger);
			} else {
				trigger.scroll(trigger.start + progress * (trigger.end - trigger.start));
			}
		}

		document.querySelector(".next").addEventListener("click", () => scrubTo(scrub.vars.totalTime + spacing));
		document.querySelector(".prev").addEventListener("click", () => scrubTo(scrub.vars.totalTime - spacing));

		function buildSeamlessLoop(items, spacing) {
			let overlap = Math.ceil(1 /
					spacing
				), // number of EXTRA animations on either side of the start/end to accommodate the seamless looping
				startTime = items.length * spacing +
				0.5, // the time on the rawSequence at which we'll start the seamless loop
				loopTime = (items.length + overlap) * spacing + 1, // the spot at the end where we loop back to the startTime 
				rawSequence = gsap.timeline({
					paused: true
				}), // this is where all the "real" animations live
				seamlessLoop = gsap
				.timeline({ // this merely scrubs the playhead of the rawSequence so that it appears to seamlessly loop
					paused: true,
					repeat: -1, // to accommodate infinite scrolling/looping
					onRepeat() { // works around a super rare edge case bug that's fixed GSAP 3.6.1
						this._time === this._dur && (this._tTime += this._dur - 0.01);
					}
				}),
				l = items.length + overlap * 2,
				time = 0,
				i, index, item;

			// set initial state of items
			gsap.set(items, {
				xPercent: 400,
				opacity: 0,
				scale: 0
			});

			// now loop through and create all the animations in a staggered fashion. Remember, we must create EXTRA animations at the end to accommodate the seamless looping.
			for (i = 0; i < l; i++) {
				index = i % items.length;
				item = items[index];
				time = i * spacing;
				rawSequence.fromTo(item, {
						scale: 0,
						opacity: 0
					}, {
						scale: 1,
						opacity: 1,
						zIndex: 100,
						duration: 0.5,
						yoyo: true,
						repeat: 1,
						ease: "power1.in",
						immediateRender: false
					}, time)
					.fromTo(item, {
						xPercent: 400
					}, {
						xPercent: -400,
						duration: 1,
						ease: "none",
						immediateRender: false
					}, time);
				i <= items.length && seamlessLoop.add("label" + i,
					time); // we don't really need these, but if you wanted to jump to key spots using labels, here ya go.
			}

			// here's where we set up the scrubbing of the playhead to make it appear seamless. 
			rawSequence.time(startTime);
			seamlessLoop.to(rawSequence, {
				time: loopTime,
				duration: loopTime - startTime,
				ease: "none"
			}).fromTo(rawSequence, {
				time: overlap * spacing + 1
			}, {
				time: startTime,
				duration: startTime - (overlap * spacing + 1),
				immediateRender: false,
				ease: "none"
			});
			return seamlessLoop;
		}
	});
	</script>
</body>

</html>